:root {
    --background-color: #f5f5f5;
    --text-color: #121212;
    --primary-accent-color: #6200ee;
    --primary-accent-text-color: #ffffff;
    --hover-background-color: #d0d0d0;
    --secondary-hover-background-color: #c0c0c0;
    --border-color: #cccccc;
    --secondary-border-color: #b0b0b0;
    --text-field-label-color: #555555;
    --text-field-focused-label-color: #121212;

    /* Elevations for Light Theme */
    --elevation-1: 0 1px 2px rgba(0,0,0,0.20);
    --elevation-2: 0 3px 6px rgba(0,0,0,0.16);
    --elevation-3: 0 6px 10px rgba(0,0,0,0.19);
    --elevation-4: 0 10px 20px rgba(0,0,0,0.22);

    --elevation-1-bg: #f0f0f0;
    --elevation-2-bg: #ffffff;
    --elevation-3-bg: #e0e0e0;
    --elevation-4-bg: #e0e0e0;
}

[data-theme="dark"] {
    --background-color: #121212;
    --text-color: #e0e0e0;
    --primary-accent-color: #bb86fc;
    --primary-accent-text-color: #121212;
    --hover-background-color: #333;
    --secondary-hover-background-color: #444;
    --border-color: transparent;
    --secondary-border-color: transparent;
    --text-field-label-color: #888;
    --text-field-focused-label-color: #fff;

    /* Elevations for Dark Theme (Color Mix) */
    --elevation-1-bg: color-mix(in srgb, var(--background-color) 85%, white 5%);
    --elevation-2-bg: color-mix(in srgb, var(--background-color) 80%, white 8%);
    --elevation-3-bg: color-mix(in srgb, var(--background-color) 75%, white 11%);
    --elevation-4-bg: color-mix(in srgb, color-mix(in srgb, var(--background-color) 70%, white 14%) 92%, blue 8%);
    --elevation-shadow: none;
}

/* Basic Reset */
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: sans-serif;
    overflow: hidden;
}

.theme-provider-root {
    height: 100%;
    color: var(--text-color);
    background-color: var(--background-color);
}

/* New Nested Layout */
#main-layout {
    display: flex;
    flex-direction: column;
    height: 100vh;
    position: relative;
    overflow: hidden;
}

.background-renderer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.background-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--background-color);
}

#middle-area {
    display: grid;
    flex-grow: 1;
    grid-template-columns: var(--left-region-width, 80px) 1fr var(--right-region-width, 80px);
    grid-template-rows: 1fr auto;
    grid-template-areas:
        "sidebar-left main-panel sidebar-right"
        "sidebar-left activity-bar sidebar-right";
    transition: grid-template-columns 0.3s ease;
    min-height: 0;
}

.hud-region {
    border: none;
    box-sizing: border-box;
    overflow: hidden;
    color: var(--text-color);
    padding: 10px;
    transition: all 0.3s ease;
}

.main-panel {
    position: relative;
    overflow: auto;
    background-color: var(--background-color);
}

.content-renderer {
    width: 100%;
    height: 100%;
    display: flex;
}

.content-image {
    width: 3840px;
    height: auto;
}

.app-bar {
    box-shadow: var(--elevation-4, none);
    background-color: var(--elevation-4-bg);
}

.status-bar {
    box-shadow: var(--elevation-3, none);
    background-color: var(--elevation-3-bg);
}

.sidebar-left, .sidebar-right {
    box-shadow: var(--elevation-2, none);
    background-color: var(--elevation-2-bg);
}

.activity-bar {
    box-shadow: var(--elevation-1, none);
    background-color: var(--elevation-1-bg);
}

.corner-region {
    position: absolute;
    width: 180px;
    height: 180px;
    background: color-mix(in srgb, var(--elevation-1-bg) 50%, transparent);
    border: none;
    display: flex;
    flex-direction: column;
    box-shadow: var(--elevation-1, none);
}

.app-bar, .activity-bar {
    flex-shrink: 0;
}

.hud-top-left { top: 0; left: 0; }
.hud-top-right { top: 0; right: 0; }
.hud-bottom-left { bottom: 0; left: 0; }
.hud-bottom-right { bottom: 0; right: 0; }

.status-bar {
    color: var(--text-color);
    display: grid;
    grid-template-columns: auto auto 1fr auto auto;
    align-items: center;
    padding: 0 10px;
    height: 28px;
    gap: 10px;
}

.status-bar-center { display: flex; justify-content: center; }
.status-bar-left-1, .status-bar-left-2, .status-bar-right-1, .status-bar-right-2 { display: flex; align-items: center; }
.toolbar-group { display: flex; align-items: center; gap: 5px; padding: 0 5px; cursor: pointer; font-size: 12px; }
.toolbar-group:hover { background-color: var(--hover-background-color); }

.sidebar-left.collapsed, .sidebar-right.collapsed { display: flex; justify-content: center; align-items: flex-start; padding-top: 10px; }
.app-bar.collapsed, .activity-bar.collapsed { display: flex; justify-content: flex-start; align-items: center; padding-left: 10px; }
.corner-region.collapsed { display: flex; justify-content: center; align-items: center; width: auto; height: auto; }
.app-bar.collapsed { height: 40px; }
.activity-bar.collapsed { height: 40px; }

.auth-page { display: flex; justify-content: center; align-items: center; height: 100vh; }
.auth-container { background-color: var(--tertiary-background-color); padding: 32px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); width: 100%; max-width: 400px; text-align: center; }
.auth-icon .material-icons { font-size: 128px; }
.auth-container h2 { margin-bottom: 24px; }
.form-field { margin-bottom: 16px; text-align: left; }
.form-field label { display: block; margin-bottom: 8px; }
.form-field input { width: 100%; padding: 10px; border-radius: 4px; border: 1px solid var(--border-color); background-color: var(--background-color); color: var(--text-color); }
.auth-button { width: 100%; padding: 12px; border: none; border-radius: 4px; background-color: var(--primary-accent-color); color: var(--primary-accent-text-color); font-size: 16px; cursor: pointer; margin-top: 16px; display: flex; align-items: center; justify-content: center; gap: 10px; }
.auth-button-icon { height: 20px; width: 20px; }
.google-blue { background-color: #4285F4; color: white; }
.microsoft-blue { background-color: #00A4EF; color: white; }
.apple-black { background-color: #E0E0E0; color: #121212; }
.auth-links { margin-top: 16px; }
.auth-links a { color: var(--primary-accent-color); text-decoration: none; }

.drawer { display: flex; flex-direction: column; }
.drawer-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-shrink: 0; padding: 0 5px; }
.drawer-title { font-weight: bold; font-size: 1.2em; white-space: nowrap; }
.drawer-content { flex-grow: 1; overflow-y: auto; overflow-x: hidden; }
.drawer-item { display: flex; align-items: center; gap: 10px; padding: 10px; cursor: pointer; border-radius: 4px; white-space: nowrap; }
.drawer-item:hover { background-color: var(--hover-background-color); }
.drawer-toggle-icon { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; cursor: pointer; border-radius: 5px; transition: background-color 0.2s; }
.drawer-toggle-icon:hover { background-color: var(--hover-background-color); }
.drawer-toggle-icon.mirrored-icon { transform: scaleX(-1); }
.sidebar-left.collapsed .drawer-header, .sidebar-right.collapsed .drawer-header { justify-content: center; }
.sidebar-left.collapsed .drawer-item, .sidebar-right.collapsed .drawer-item { justify-content: center; gap: 0; }

.app-bar { display: flex; justify-content: space-between; align-items: center; }
.app-bar .left-group, .app-bar .right-group { display: flex; align-items: center; flex: 1; }
.app-bar .right-group { justify-content: flex-end; }
.app-bar .center-group { flex-grow: 2; text-align: center; }
.app-bar h1 { margin: 0; font-size: 1.5em; }
.app-bar-toolbar { display: flex; align-items: center; gap: 8px; margin-right: 16px; }
.avatar-container { position: relative; margin-left: 24px; cursor: pointer; border-radius: 50%; padding: 2px; transition: background-color 0.2s; }
.avatar-container:hover { background-color: var(--hover-background-color); }
.avatar-container .material-icons { font-size: 48px; }
.avatar-menu { position: absolute; top: 60px; right: 10px; min-width: 180px; background: var(--quaternary-background-color); border: 1px solid var(--secondary-border-color); border-radius: 4px; padding: 8px; z-index: 1000; }
.avatar-menu ul { list-style: none; margin: 0; padding: 0; }
.menu-item-link, .menu-item-button { background: none; border: none; color: var(--text-color); cursor: pointer; padding: 0; text-decoration: none; display: block; width: 100%; }
.menu-item-content { display: flex; align-items: center; gap: 10px; padding: 8px 12px; }
.avatar-menu li:hover { background-color: var(--secondary-hover-background-color); }

.activity-bar { display: flex; flex-direction: column; justify-content: space-around; padding: 5px 10px !important; }
.activity-bar.collapsed .user-drawer-icon-row { flex-grow: 0; }
.activity-bar > .user-drawer-input-container, .activity-bar > .user-drawer-icon-row { width: 100%; display: flex; }
.user-drawer-input-container { width: 100%; flex-grow: 1; }
.user-drawer-icon-row { display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.user-drawer-left-icons { display: flex; gap: 5px; align-items: center; }
.user-drawer-icon-item { cursor: pointer; border-radius: 5px; padding: 5px; transition: background-color 0.2s; }
.user-drawer-icon-item:hover { background-color: var(--hover-background-color); }
.user-drawer-input-container mwc-textfield { --mdc-text-field-fill-color: var(--quaternary-background-color); --mdc-text-field-ink-color: var(--text-color); --mdc-text-field-label-ink-color: var(--text-field-label-color); --mdc-text-field-focused-label-color: var(--text-field-focused-label-color); --mdc-theme-primary: var(--primary-accent-color); width: 100%; }

#floating-toolbar { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background-color: var(--toolbar-background-color); border: none; border-radius: 8px; padding: 8px; display: flex; gap: 8px; z-index: 100; box-shadow: var(--elevation-2, none); }
.toolbar-item { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; cursor: pointer; border-radius: 5px; transition: background-color 0.3s; }
.toolbar-item:hover { background-color: var(--hover-background-color); }

.button { padding: 10px 15px; border: 1px solid var(--border-color); background-color: var(--tertiary-background-color); color: var(--text-color); cursor: pointer; border-radius: 4px; font-size: 1em; }
.button:hover { background-color: var(--hover-background-color); }
.button:disabled { background-color: var(--secondary-background-color); color: var(--secondary-border-color); cursor: not-allowed; }
.button-primary { background-color: var(--primary-accent-color); color: var(--primary-accent-text-color); border-color: var(--primary-accent-color); }

.toggle-top-left .drawer-toggle-icon { align-self: flex-start; }
.content-iframe { width: 100%; height: 100%; border: none; }
.toggle-top-right .drawer-toggle-icon { align-self: flex-end; }
.toggle-bottom-left { flex-direction: column-reverse; }
.toggle-bottom-left .drawer-toggle-icon { align-self: flex-start; }
.toggle-bottom-right { flex-direction: column-reverse; }
.toggle-bottom-right .drawer-toggle-icon { align-self: flex-end; }

.user-profile-card { background-color: var(--tertiary-background-color); border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 24px; max-width: 300px; text-align: center; border: 1px solid var(--border-color); }
.user-profile-card .card-header .avatar-container { margin-bottom: 16px; }
.user-profile-card .card-header .avatar-container .material-icons { font-size: 96px; color: var(--primary-accent-color); }
.user-profile-card .user-name { margin: 0; font-size: 1.5em; font-weight: bold; }
.user-profile-card .user-title { margin: 4px 0 16px 0; color: var(--secondary-text-color, #555); }
.user-profile-card .user-bio { font-size: 0.9em; line-height: 1.5; margin-bottom: 24px; }

.chat-history-view { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
.chat-message { display: flex; margin-bottom: 10px; max-width: 80%; }
.user-message { align-self: flex-end; justify-content: flex-end; }
.bot-message { align-self: flex-start; justify-content: flex-start; }
.message-bubble { padding: 10px 15px; border-radius: 18px; }
.user-message .message-bubble { background-color: var(--primary-accent-color); color: var(--primary-accent-text-color); }
.bot-message .message-bubble { background-color: var(--secondary-background-color); color: var(--text-color); }

.chat-input-bar { display: flex; padding: 0; background-color: transparent; width: 100%; align-items: center; }
.chat-input { flex-grow: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px; background-color: var(--background-color); color: var(--text-color); margin-right: 10px; }
.chat-send-button { padding: 10px 15px; border: none; border-radius: 4px; background-color: var(--primary-accent-color); color: var(--primary-accent-text-color); cursor: pointer; }

.bento-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); grid-auto-rows: 150px; gap: 10px; padding: 10px; }
.bento-grid-item { background-color: var(--secondary-background-color); border-radius: 8px; padding: 20px; box-sizing: border-box; }

[data-theme="dracula"] { --background-color: #282a36; --text-color: #f8f8f2; --primary-accent-color: #ff79c6; --primary-accent-text-color: #282a36; --secondary-background-color: #44475a; --tertiary-background-color: #282a36; --quaternary-background-color: #6272a4; --hud-background-color: rgba(40, 42, 54, 0.85); --hud-border-color: #6272a4; --corner-hud-background-color: rgba(68, 71, 90, 0.85); --corner-hud-border-color: #bd93f9; --hover-background-color: #6272a4; --secondary-hover-background-color: #44475a; --border-color: #44475a; --secondary-border-color: #6272a4; --text-field-label-color: #f8f8f2; --text-field-focused-label-color: #ff79c6; --toolbar-background-color: rgba(68, 71, 90, 0.9); --secondary-text-color: #bd93f9; }
[data-theme="nord"] { --background-color: #2e3440; --text-color: #d8dee9; --primary-accent-color: #88c0d0; --primary-accent-text-color: #2e3440; --secondary-background-color: #3b4252; --tertiary-background-color: #434c5e; --quaternary-background-color: #4c566a; --hud-background-color: rgba(46, 52, 64, 0.85); --hud-border-color: #4c566a; --corner-hud-background-color: rgba(59, 66, 82, 0.85); --corner-hud-border-color: #81a1c1; --hover-background-color: #4c566a; --secondary-hover-background-color: #434c5e; --border-color: #3b4252; --secondary-border-color: #4c566a; --text-field-label-color: #d8dee9; --text-field-focused-label-color: #88c0d0; --toolbar-background-color: rgba(59, 66, 82, 0.9); --secondary-text-color: #81a1c1; }
[data-theme="github-light"] { --background-color: #ffffff; --text-color: #24292e; --primary-accent-color: #0366d6; --primary-accent-text-color: #ffffff; --secondary-background-color: #f6f8fa; --tertiary-background-color: #ffffff; --quaternary-background-color: #e1e4e8; --hud-background-color: rgba(255, 255, 255, 0.85); --hud-border-color: #e1e4e8; --corner-hud-background-color: rgba(246, 248, 250, 0.85); --corner-hud-border-color: #d1d5da; --hover-background-color: #f6f8fa; --secondary-hover-background-color: #e1e4e8; --border-color: #e1e4e8; --secondary-border-color: #d1d5da; --text-field-label-color: #586069; --text-field-focused-label-color: #24292e; --toolbar-background-color: rgba(246, 248, 250, 0.9); --secondary-text-color: #586069; }
[data-theme="solarized-light"] { --background-color: #fdf6e3; --text-color: #657b83; --primary-accent-color: #268bd2; --primary-accent-text-color: #fdf6e3; --secondary-background-color: #eee8d5; --tertiary-background-color: #fdf6e3; --quaternary-background-color: #eee8d5; --hud-background-color: rgba(253, 246, 227, 0.85); --hud-border-color: #eee8d5; --corner-hud-background-color: rgba(238, 232, 213, 0.85); --corner-hud-border-color: #93a1a1; --hover-background-color: #eee8d5; --secondary-hover-background-color: #93a1a1; --border-color: #eee8d5; --secondary-border-color: #93a1a1; --text-field-label-color: #93a1a1; --text-field-focused-label-color: #586e75; --toolbar-background-color: rgba(238, 232, 213, 0.9); --secondary-text-color: #93a1a1; }
[data-theme="monokai"] { --background-color: #272822; --text-color: #f8f8f2; --primary-accent-color: #f92672; --primary-accent-text-color: #f8f8f2; --secondary-background-color: #75715e; --tertiary-background-color: #272822; --quaternary-background-color: #75715e; --hud-background-color: rgba(39, 40, 34, 0.85); --hud-border-color: #75715e; --corner-hud-background-color: rgba(60, 60, 50, 0.85); --corner-hud-border-color: #a6e22e; --hover-background-color: #75715e; --secondary-hover-background-color: #3e3d32; --border-color: #75715e; --secondary-border-color: #f92672; --text-field-label-color: #f8f8f2; --text-field-focused-label-color: #f92672; --toolbar-background-color: rgba(60, 60, 50, 0.9); --secondary-text-color: #a6e22e; }
[data-theme="cyberpunk"] { --background-color: #0d0221; --text-color: #00f0ff; --primary-accent-color: #ff00ff; --primary-accent-text-color: #ffffff; --secondary-background-color: #261a3b; --tertiary-background-color: #0d0221; --quaternary-background-color: #261a3b; --hud-background-color: rgba(13, 2, 33, 0.85); --hud-border-color: #ff00ff; --corner-hud-background-color: rgba(38, 26, 59, 0.85); --corner-hud-border-color: #00f0ff; --hover-background-color: #261a3b; --secondary-hover-background-color: #4f3b78; --border-color: #ff00ff; --secondary-border-color: #00f0ff; --text-field-label-color: #00f0ff; --text-field-focused-label-color: #ff00ff; --toolbar-background-color: rgba(38, 26, 59, 0.9); --secondary-text-color: #00f0ff; }

.landing-page { display: flex; flex-direction: column; height: 100vh; background-color: var(--background-color); color: var(--text-color); }
.landing-nav { display: flex; justify-content: space-between; align-items: center; padding: 16px 32px; border-bottom: 1px solid var(--border-color); }
.nav-right { display: flex; gap: 16px; }
.landing-main { flex-grow: 1; display: flex; justify-content: center; align-items: center; padding: 32px; }
.hero-section { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; width: 100%; max-width: 1200px; }
.hero-content { display: flex; flex-direction: column; }
.hero-headline { font-size: 3.5em; font-weight: bold; margin: 0 0 16px 0; line-height: 1.1; }
.hero-subheadline { font-size: 1.2em; color: var(--secondary-text-color, #555); margin-bottom: 32px; }
.signup-form { display: flex; gap: 8px; }
.signup-input { flex-grow: 1; padding: 12px; border-radius: 4px; border: 1px solid var(--border-color); background-color: var(--tertiary-background-color); color: var(--text-color); font-size: 1em; }
.signup-button { white-space: nowrap; }
.hero-image-container { display: flex; justify-content: center; align-items: center; }
.hero-image { width: 100%; border-radius: 8px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2); }
.landing-footer { padding: 16px 32px; text-align: center; border-top: 1px solid var(--border-color); color: var(--secondary-text-color, #555); }

md-icon { font-family: 'Material Symbols Outlined'; font-size: 24px; }

.sidebar-left { grid-area: sidebar-left; }
.main-panel { grid-area: main-panel; }
.sidebar-right { grid-area: sidebar-right; }
.activity-bar { grid-area: activity-bar; }

.sso-logo { width: 20px; height: 20px; }

.toggle-top-left .drawer-toggle-icon { align-self: flex-start; }
.toggle-top-right .drawer-toggle-icon { align-self: flex-end; }
.toggle-bottom-left { flex-direction: column-reverse; }
.toggle-bottom-left .drawer-toggle-icon { align-self: flex-start; }
.toggle-bottom-right { flex-direction: column-reverse; }
.toggle-bottom-right .drawer-toggle-icon { align-self: flex-end; }